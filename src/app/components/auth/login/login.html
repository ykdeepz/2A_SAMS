<div class="login-wrapper">
  <div class="header-section">
    <div class="header-grid">
      <div class="header-box blue"></div>
      <div class="header-box blue"></div>
      <div class="header-box gold"></div>
      <div class="header-box gold"></div>
    </div>
  </div>

  <div class="login-container">
    <h2>{{ isSignUp ? 'Create Account' : 'Sign In' }}</h2>
    
    
    <div class="mode-toggle">
      <button
        type="button"
        [class.active]="!isSignUp"
        (click)="toggleSignUp()"
        class="mode-btn"
      >
        SIGN IN
      </button>
      <button
        type="button"
        [class.active]="isSignUp"
        (click)="toggleSignUp()"
        class="mode-btn"
      >
        SIGN UP
      </button>
    </div>

    <div class="role-tabs">
      <button
        *ngFor="let role of displayRoles"
        [class.active]="selectedRole === role"
        (click)="switchRole(role)"
        class="role-tab"
        type="button"
      >
        {{ role | uppercase }}
      </button>
    </div>

    <form (ngSubmit)="onSubmit()" #f="ngForm">
      <div *ngIf="isSignUp" class="form-section">
        <div *ngIf="isInstructor()">
          <div class="form-group">
            <label>Instructor ID</label>
            <input name="id" [(ngModel)]="currentData.id" type="text" placeholder="Enter Instructor ID" required />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>First Name</label>
              <input name="firstName" [(ngModel)]="currentData.firstName" type="text" placeholder="First Name" required />
            </div>
            <div class="form-group">
              <label>Middle Name</label>
              <input name="middleName" [(ngModel)]="currentData.middleName" type="text" placeholder="Middle Name" />
            </div>
          </div>
          <div class="form-group">
            <label>Last Name</label>
            <input name="lastName" [(ngModel)]="currentData.lastName" type="text" placeholder="Last Name" required />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input name="email" [(ngModel)]="currentData.email" type="email" placeholder="instructor@ustp.edu" required />
          </div>
          <div class="form-group">
            <label>Department</label>
            <input name="department" [(ngModel)]="currentData.department" type="text" placeholder="Department" required />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input name="password" [(ngModel)]="currentData.password" type="password" placeholder="Password" required />
          </div>
          <div class="form-group">
            <label>Confirm Password</label>
            <input name="confirmPassword" [(ngModel)]="currentData.confirmPassword" type="password" placeholder="Confirm Password" required />
          </div>
        </div>

        <div *ngIf="isStudent()">
          <div class="form-group">
            <label>Student ID</label>
            <input name="id" [(ngModel)]="currentData.id" type="text" placeholder="2024001" required />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>First Name</label>
              <input name="firstName" [(ngModel)]="currentData.firstName" type="text" placeholder="First Name" required />
            </div>
            <div class="form-group">
              <label>Middle Name</label>
              <input name="middleName" [(ngModel)]="currentData.middleName" type="text" placeholder="Middle Name" />
            </div>
          </div>
          <div class="form-group">
            <label>Last Name</label>
            <input name="lastName" [(ngModel)]="currentData.lastName" type="text" placeholder="Last Name" required />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input name="email" [(ngModel)]="currentData.email" type="email" placeholder="student@ustp.edu" required />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Mobile Number</label>
              <input name="mobileNumber" [(ngModel)]="currentData.mobileNumber" type="tel" placeholder="09xxxxxxxxx" required />
            </div>
            <div class="form-group">
              <label>Grade Level</label>
              <input name="gradeLevel" [(ngModel)]="currentData.gradeLevel" type="text" placeholder="Grade 10" required />
            </div>
          </div>
          <div class="form-group">
            <label>Section</label>
            <input name="section" [(ngModel)]="currentData.section" type="text" placeholder="Section A" required />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Latitude</label>
              <input name="latitude" [(ngModel)]="currentData.latitude" type="number" step="any" placeholder="8.123456" required />
            </div>
            <div class="form-group">
              <label>Longitude</label>
              <input name="longitude" [(ngModel)]="currentData.longitude" type="number" step="any" placeholder="124.123456" required />
            </div>
          </div>
          <div class="form-group">
            <label>Address</label>
            <input name="address" [(ngModel)]="currentData.address" type="text" placeholder="Complete address" required />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input name="password" [(ngModel)]="currentData.password" type="password" placeholder="Password" required />
          </div>
          <div class="form-group">
            <label>Confirm Password</label>
            <input name="confirmPassword" [(ngModel)]="currentData.confirmPassword" type="password" placeholder="Confirm Password" required />
          </div>
          <div class="form-group">
            <label>Upload QR Code</label>
            <input name="qrCode" type="file" accept="image/*" />
          </div>
        </div>

        <div *ngIf="isParent()">
          <div class="form-group">
            <label>First Name</label>
            <input name="firstName" [(ngModel)]="currentData.firstName" type="text" placeholder="First Name" required />
          </div>
          <div class="form-group">
            <label>Middle Name</label>
            <input name="middleName" [(ngModel)]="currentData.middleName" type="text" placeholder="Middle Name" required />
          </div>
          <div class="form-group">
            <label>Last Name</label>
            <input name="lastName" [(ngModel)]="currentData.lastName" type="text" placeholder="Last Name" required />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input name="email" [(ngModel)]="currentData.email" type="email" placeholder="parent@example.com" required />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input name="password" [(ngModel)]="currentData.password" type="password" placeholder="Password" required />
          </div>
          <div class="form-group">
            <label>Confirm Password</label>
            <input name="confirmPassword" [(ngModel)]="currentData.confirmPassword" type="password" placeholder="Confirm Password" required />
          </div>
        </div>
      </div>
      
      
      <div *ngIf="!isSignUp" class="form-section">
        <div class="form-group">
          <label>{{ idLabel }}</label>
          <input name="id" [(ngModel)]="signInCurrentData.id" type="text" [placeholder]="idPlaceholder" required />
        </div>
        <div class="form-group">
          <label>Password</label>
          <input name="password" [(ngModel)]="signInCurrentData.password" type="password" placeholder="Password" required />
        </div>
        <p class="demo-creds">{{ demoCredentials }}</p>
      </div>

      <button type="submit" class="signin-btn">{{ isSignUp ? 'CREATE ACCOUNT' : 'SIGN IN' }}</button>
    </form>

    <p class="message" [style.color]="messageColor">{{ message }}</p>

    <div class="footer-links">
      <a (click)="openForgotPassword()" style="cursor: pointer;">Forgot your password</a>
      <span class="divider">|</span>
      <a (click)="openHelp()" style="cursor: pointer;">Help</a>
    </div>
  </div>

  <div *ngIf="isForgotPasswordOpen" class="forgot-password-modal">
    <div class="modal-overlay" (click)="closeForgotPassword()"></div>
    <div class="modal-content">
      <button class="close-btn" (click)="closeForgotPassword()">&times;</button>
      <h3>Reset Password</h3>
      <p class="modal-subtitle">{{ forgotPasswordRole | uppercase }}</p>

      <form (ngSubmit)="handleForgotPassword()">
        <div class="form-group">
          <label>{{ forgotPasswordLabel }}</label>
          <input
            [(ngModel)]="forgotPasswordId"
            name="forgotPasswordId"
            type="text"
            [placeholder]="forgotPasswordPlaceholder"
            required
          />
        </div>

        <div class="form-group">
          <label>New Password</label>
          <input
            [(ngModel)]="forgotPasswordNewPassword"
            name="newPassword"
            type="password"
            placeholder="New Password"
            required
          />
        </div>

        <div class="form-group">
          <label>Confirm Password</label>
          <input
            [(ngModel)]="forgotPasswordConfirmPassword"
            name="confirmPassword"
            type="password"
            placeholder="Confirm Password"
            required
          />
        </div>

        <button type="submit" class="reset-btn">Reset Password</button>
      </form>

      <p class="message" [style.color]="messageColor" *ngIf="message">{{ message }}</p>
    </div>
  </div>

  <div *ngIf="isHelpOpen" class="help-modal">
    <div class="modal-overlay" (click)="closeHelp()"></div>
    <div class="modal-content">
      <button class="close-btn" (click)="closeHelp()">&times;</button>
      <h3>Help & Support</h3>

      <div class="help-section">
        <h4>Account Creation</h4>
        <p>If you already have an account, use the <strong>SIGN IN</strong> tab. To create a new account, select <strong>SIGN UP</strong> and choose your role (Instructor, Student, or Parent).</p>
      </div>

      <div class="help-section">
        <h4>Forgot Your Password?</h4>
        <p>Click on <strong>"Forgot your password"</strong> to reset your password. You'll need to provide your ID or email and set a new password.</p>
      </div>

      <div class="help-section">
        <h4>Sign In</h4>
        <p>Select your role and enter your credentials. Admin users can sign in using email: <code>admin@ustp.edu</code></p>
      </div>

      <div class="help-section">
        <h4>Demo Credentials</h4>
        <p>Demo credentials are displayed below the password field during sign-in to help you test the application.</p>
      </div>

      <div class="help-section">
        <h4>Need More Help?</h4>
        <p>Contact the system administrator or email <strong>support@ustp.edu</strong> for further assistance.</p>
      </div>

      <button class="close-help-btn" (click)="closeHelp()">Close</button>
    </div>
  </div>
</div>
