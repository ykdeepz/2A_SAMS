<div class="attendance-dialog-modal">
  <div class="dialog-content" *ngIf="!loading">
    <h2>Mark Attendance</h2>
    <div *ngIf="student; else notFound">
      <div class="student-info">
        <div class="avatar">{{ student.name.charAt(0) }}</div>
        <div class="details">
          <div class="name">{{ student.name }}</div>
          <div class="id">ID: {{ student.studentId }}</div>
          <div class="email">{{ student.email }}</div>
        </div>
      </div>
      <div class="form-group">
        <label>Status:</label>
        <select [(ngModel)]="status">
          <option value="present">In Attendance</option>
          <option value="late">Late</option>
        </select>
      </div>
      <div class="form-group">
        <label>Subject:</label>
        <select [(ngModel)]="selectedSubjectId">
          <option *ngFor="let subj of subjects" [value]="subj.id" [disabled]="!subj.enrolledStudents.includes(student.id)">
            {{ subj.code }} - {{ subj.name }}
          </option>
        </select>
      </div>
      <div class="form-group">
        <label>Notes (optional):</label>
        <textarea [(ngModel)]="notes" placeholder="Add notes..."></textarea>
      </div>
      <div class="error-message" *ngIf="error">{{ error }}</div>
      <div class="dialog-actions">
        <button class="submit-btn" (click)="submitAttendance()">Submit Attendance</button>
        <button class="cancel-btn" (click)="cancel()">Cancel</button>
      </div>
    </div>
    <ng-template #notFound>
      <div class="error-message">Student not found.</div>
      <button class="cancel-btn" (click)="cancel()">Close</button>
    </ng-template>
  </div>
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading student info...</p>
  </div>
</div>
