<div class="container">
  <app-sidebar [currentUser]="currentUser"></app-sidebar>

  <div class="main-content">
    <header class="page-header">
      <button class="back-btn" (click)="goBack()" title="Go back to dashboard">‚Üê Back</button>
      <h1>‚öôÔ∏è Settings</h1>
      <p>Manage your account and preferences</p>
    </header>

    <!-- Notification Alert -->
    <div *ngIf="showNotification" class="notification-alert success">
      ‚úì {{ notificationMessage }}
    </div>

    <!-- Profile Settings -->
    <section class="settings-section">
      <div class="section-header">
        <h2>üë§ Profile Information</h2>
        <button class="btn-secondary" (click)="toggleEditMode()">
          {{ editMode ? 'Cancel' : 'Edit Profile' }}
        </button>
      </div>

      <div class="settings-card">
        <div *ngIf="!editMode" class="view-mode">
          <div class="info-row">
            <span class="label">Name:</span>
            <span class="value">{{ currentUser?.name }}</span>
          </div>
          <div class="info-row">
            <span class="label">Email:</span>
            <span class="value">{{ currentUser?.email }}</span>
          </div>
          <div class="info-row">
            <span class="label">Role:</span>
            <span class="value">{{ currentUser?.role | titlecase }}</span>
          </div>
        </div>

        <div *ngIf="editMode" class="edit-mode">
          <div class="form-group">
            <label>Name:</label>
            <input type="text" [(ngModel)]="profileForm.name" class="form-control">
          </div>
          <div class="form-group">
            <label>Email:</label>
            <input type="email" [(ngModel)]="profileForm.email" class="form-control">
          </div>
          <button class="btn-primary" (click)="saveProfile()">Save Changes</button>
        </div>
      </div>
    </section>

    <!-- Password Settings -->
    <section class="settings-section">
      <h2>üîê Security</h2>
      <div class="settings-card">
        <div class="security-item">
          <div>
            <h3>Change Password</h3>
            <p>Update your password regularly to keep your account secure</p>
          </div>
          <button class="btn-secondary" (click)="resetPassword()">Reset Password</button>
        </div>
      </div>
    </section>

    <!-- Notification Settings -->
    <section class="settings-section">
      <h2>üîî Notifications</h2>
      <div class="settings-card">
        <div class="notification-item">
          <div class="notification-info">
            <h3>Email Notifications</h3>
            <p>Receive email alerts about important activities</p>
          </div>
          <button class="toggle-switch" 
                  [class.active]="notificationSettings.emailNotifications"
                  (click)="toggleNotification('emailNotifications')">
            {{ notificationSettings.emailNotifications ? 'ON' : 'OFF' }}
          </button>
        </div>

        <div class="notification-item">
          <div class="notification-info">
            <h3>Attendance Reminders</h3>
            <p>Get reminders before your scheduled classes</p>
          </div>
          <button class="toggle-switch" 
                  [class.active]="notificationSettings.attendanceReminders"
                  (click)="toggleNotification('attendanceReminders')">
            {{ notificationSettings.attendanceReminders ? 'ON' : 'OFF' }}
          </button>
        </div>

        <div class="notification-item">
          <div class="notification-info">
            <h3>Class Updates</h3>
            <p>Notifications about course materials and announcements</p>
          </div>
          <button class="toggle-switch" 
                  [class.active]="notificationSettings.classUpdates"
                  (click)="toggleNotification('classUpdates')">
            {{ notificationSettings.classUpdates ? 'ON' : 'OFF' }}
          </button>
        </div>

        <div class="notification-item">
          <div class="notification-info">
            <h3>System Alerts</h3>
            <p>Critical system and security notifications</p>
          </div>
          <button class="toggle-switch" 
                  [class.active]="notificationSettings.systemAlerts"
                  (click)="toggleNotification('systemAlerts')">
            {{ notificationSettings.systemAlerts ? 'ON' : 'OFF' }}
          </button>
        </div>
      </div>
    </section>

    <!-- Data & Privacy -->
    <section class="settings-section">
      <h2>üìä Data & Privacy</h2>
      <div class="settings-card">
        <div class="data-item">
          <div>
            <h3>Export Your Data</h3>
            <p>Download a copy of all your data in CSV format</p>
          </div>
          <button class="btn-secondary" (click)="exportData()">Export Data</button>
        </div>
      </div>
    </section>
  </div>
</div>
